<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Tova 6-Week Roadmap</title>
<style>
  body { font-family: Arial, Helvetica, sans-serif; margin: 40px; color: #111; }
  h1 { font-size: 24px; margin-bottom: 4px; }
  h2 { font-size: 16px; margin-top: 20px; }
  p { margin: 6px 0; }
  ul { margin: 6px 0 6px 18px; padding: 0; }
  li { margin: 4px 0; }
  table { border-collapse: collapse; width: 100%; margin-top: 8px; }
  th, td { border: 1px solid #444; padding: 8px; vertical-align: top; }
  th { background: #f0f0f0; text-align: left; }
  .meta { color: #444; font-size: 12px; }
</style>
</head>
<body>
  <h1>Tova 6-Week Roadmap</h1>
  <p class="meta">Prepared February 3, 2026</p>

  <h2>Repository Snapshot</h2>
  <ul>
    <li>Vite + Three.js single-page client (index.html + src/main.js).</li>
    <li>Current world: environment (sky/fog/lights), procedural terrain with hill and town flat, ocean plane, castle and town primitives.</li>
    <li>Player: pointer-lock first-person, WASD movement, chat commands for fly/walk, terrain alignment via getHeightAt raycasts.</li>
    <li>Postprocessing: EffectComposer with bloom and tone mapping; performance tuned (no AA, capped pixel ratio).</li>
    <li>Godot backup project provides voxel interaction reference but is not wired into the web app.</li>
  </ul>

  <h2>Architecture Constraints</h2>
  <ul>
    <li>Terrain origin and flattened town area are hard-coded; castle/town depend on these coordinates.</li>
    <li>Terrain.getHeightAt uses per-query raycasts; scaling actor count could be expensive.</li>
    <li>Pointer lock is required for core controls; mobile support will need an alternative input scheme.</li>
    <li>No test or lint scripts exist in package.json; quality checks are manual today.</li>
    <li>Only dependency is three; adding features may require new libraries (noise, UI, assets).</li>
  </ul>

  <h2>Milestones</h2>
  <ul>
    <li>Milestone 1 (Weeks 1-2): Stabilize core world systems and add reproducible world configuration.</li>
    <li>Milestone 2 (Weeks 3-4): Add interaction layer and exploration objectives.</li>
    <li>Milestone 3 (Weeks 5-6): Content pass, polish, and release readiness.</li>
  </ul>

  <h2>Dependencies</h2>
  <ul>
    <li>Seeded terrain may require a noise library or a custom deterministic noise utility.</li>
    <li>Interaction/UI work needs a shared state model plus a raycast targeting system.</li>
    <li>New assets (models, textures, audio) need a pipeline and clear licensing.</li>
    <li>Performance profiling tools (Stats.js or custom HUD) are needed for tuning.</li>
  </ul>

  <h2>Risks</h2>
  <ul>
    <li>Increased raycasts can reduce frame rate; may need a heightmap or cached sampling.</li>
    <li>Bloom and water transmission can be expensive on integrated GPUs.</li>
    <li>Pointer lock permissions can block onboarding or mobile usage.</li>
    <li>Tight coupling to terrain coordinates makes large-scale world changes risky without refactors.</li>
  </ul>

  <h2>Week-by-Week Plan</h2>
  <table>
    <thead>
      <tr>
        <th>Week</th>
        <th>Goal</th>
        <th>Deliverables</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>Baseline and planning</td>
        <td>Document invariants, centralize world constants, add dev HUD (FPS + toggles).</td>
      </tr>
      <tr>
        <td>2</td>
        <td>Deterministic terrain + environment</td>
        <td>Seeded terrain generation, expose water/fog/lighting params, add spawn points.</td>
      </tr>
      <tr>
        <td>3</td>
        <td>Interaction framework</td>
        <td>Raycast target system, hover highlight, on-screen prompt, interactable interface.</td>
      </tr>
      <tr>
        <td>4</td>
        <td>Exploration loop</td>
        <td>Points of interest for castle/town, simple objectives list, lightweight progress UI.</td>
      </tr>
      <tr>
        <td>5</td>
        <td>Content + performance pass</td>
        <td>Improve town layout/roads/props, optimize height queries or LOD, tune shadows.</td>
      </tr>
      <tr>
        <td>6</td>
        <td>Release readiness</td>
        <td>Quality settings, help screen, build + README updates, bug triage.</td>
      </tr>
    </tbody>
  </table>
</body>
</html>
